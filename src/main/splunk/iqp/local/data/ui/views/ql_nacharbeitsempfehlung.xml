<form stylesheet="tabs/css/tabs.css, qlearning/css/db_ql_nacharbeitsempfehlung.css" script="tabs/js/tabs.js, qlearning/js/db_ql_nacharbeitsempfehlung.js">
  <init>
    <!--<set token="" i18ntag=""></set>-->
    <set token="i18n_lastExecute" i18ntag="">zuletzt ausgefuehrt</set>
    <set token="i18n_testScope" i18ntag="">Pruefumfang</set>
    <set token="i18n_error" i18ntag="">Fehler</set>
    <set token="i18n_testStepName" i18ntag="">Pruefling</set>
    <set token="i18n_description" i18ntag="">Pruefprozedur</set>
    <set token="i18n_sgbd" i18ntag="">SGBD</set>
    <set token="i18n_apiJob" i18ntag="">Api-Job</set>
    <set token="i18n_nokResults" i18ntag="">NOK Ergebnisse</set>
    <set token="i18n_resultName" i18ntag="">Ergebnisname</set>
    <set token="i18n_resultValue" i18ntag="">Ergebniswert</set>
    <set token="i18n_errorCodeDec" i18ntag="">Error Code (Dec)</set>
    <set token="i18n_errorText" i18ntag="">Fehlertext</set>
    <set token="i18n_adviseText" i18ntag="">Hinweistext</set>
    <set token="i18n_testStepResult" i18ntag="">Testschrittergebnis</set>
    <set token="i18n_errorClass" i18ntag="">Fehlerklasse</set>
    <set token="i18n_errorPattern" i18ntag="">Fehlerbild</set>
    <set token="i18n_examples" i18ntag="">Beispiele</set>
    
    <set token="i18n_execTime" i18ntag="">Zeit</set>
    <set token="i18n_station" i18ntag="">Station</set>
    <set token="i18n_shortVIN" i18ntag="">FGNR</set>
    <set token="i18n_fehlerart" i18ntag="">Fehlerart</set>
    <set token="i18n_fehlerlage" i18ntag="">Fehlerlage</set>
    <set token="i18n_fehlerort" i18ntag="">Fehlerort</set>
    <set token="i18n_taetigkeit" i18ntag="">Taetigkeit</set>
    <set token="i18n_pr_bemerkung" i18ntag="">PR Bemerkung</set>
    <set token="i18n_na_bemerkung" i18ntag="">NA Bemerkung</set>
    <set token="i18n_werk" i18ntag="">Werk</set>
    <set token="i18n_integrationLevel" i18ntag="">I-Stufe</set>
    <set token="i18n_series" i18ntag="">Baureihe</set>
    <set token="i18n_merkmal" i18ntag="">Merkmal</set>
    <set token="i18n_bel_kostenstelle" i18ntag="">NA Bel Kostenstelle Nr</set>
    <set token="i18n_bel_meisterbereich" i18ntag="">NA Bel Meisterbereich Nr</set>
    <set token="i18n_nacharbeitsdauer" i18ntag="">NA Nacharbeitsdauer</set>
    <set token="i18n_count" i18ntag="">Anzahl</set>
    
    <set token="i18n_selectedErrorClass" i18ntag="">Ausgewählte Fehlerklasse</set>
    <set token="i18n_selectedErrorPattern" i18ntag="">Ausgewähltes Fehlerbild</set>
    <set token="i18n_withFollowingErrorC" i18ntag="">mit folgenden Fehlerklassen</set>
    
    <set token="tsr_filter"></set>
    <set token="tsr_label"></set>
  </init>
  <label>QL - Nacharbeitsempfehlung</label>
  <search id="search_text_mining_part1">
    <query>index="ql_summary" $nacharbeitsfilter$ 
| fields _time station shortVIN fehlerart fehlerlage fehlerort taetigkeit pr_bemerkung na_bemerkung werk integrationLevel series merkmal bel_kostenstelle bel_meisterbereich nacharbeitsdauer | fields - _raw
    </query>
    <earliest>0</earliest>
    <latest></latest>
  </search>
  <search id="search_text_mining_part2" base="search_text_mining_part1">
    <query>
fillnull value=" " fehlerart fehlerlage fehlerort taetigkeit na_bemerkung pr_bemerkung merkmal
 | eval Nacharbeitungstext = fehlerort+" "+fehlerlage+" "+fehlerart+" "+taetigkeit+" "+pr_bemerkung+" "+na_bemerkung+" "+merkmal
 | table Nacharbeitungstext
| dedup Nacharbeitungstext
 | eval token = Nacharbeitungstext
 | eval token=replace(token,"\[[^\]]*\]"," ")
 | eval token=replace(token,"\_"," ")
 | eval token=replace(token,"\d{1}x"," ")
  | eval token=replace(token,"\d{1}"," ")
   | eval token=replace(token,"ß","ss")
   | eval token=replace(token,"ö","oe")
   | eval token=replace(token,"ü","ue")
   | eval token=replace(token,"ä","ae")
  | regex token!="\d\d" 
 | makemv tokenizer="([\wÄÖÜäöüß]{3,})" token 
 | eval token=lower(token)
 | mvexpand token  | search NOT [| inputlookup german_stopwords_new.csv | rename stopword as token ] 
  |mvcombine token
          </query>
  </search>
  <search id="search_text_mining_part3">
    <query>
index="ql_summary" $nacharbeitsfilter$
| table _time shortVIN fehlerart fehlerlage fehlerort taetigkeit pr_bemerkung na_bemerkung merkmal
| fillnull value="-" fehlerart fehlerlage fehlerort taetigkeit na_bemerkung pr_bemerkung merkmal

`comment("Behandle die Freitextfelder")`
| eval Nacharbeitungstext =pr_bemerkung+" "+na_bemerkung
| qltextpreprocessing preprocessField=Nacharbeitungstext fieldName=token lookup=bmwwords.csv language=de

`comment("Clustere die Nacharbeiten anhand der Freitext und der Auswahlfelder")`
| eval token=mvsort(mvdedup(token))
| nomv token
| fillnull value=" " token
| eval Nacharbeitungstext = fehlerort+" "+fehlerlage+" "+fehlerart+" "+taetigkeit+" "+merkmal+" "+token
| cluster field=Nacharbeitungstext t=0.5 showcount=false labelonly=true
| fields - Nacharbeitungstext
          </query>
  </search>
  <fieldset submitButton="false">
    <input type="time" token="time" searchWhenChanged="true">
      <label>Prüfergebnisse im Zeitraum</label>
      <default>
        <earliest>-24h@h</earliest>
        <latest>now</latest>
      </default>
    </input>
    <input id="input_werk" type="dropdown" token="tok_werk" searchWhenChanged="true">
      <label>Werk</label>
      <prefix>werk="</prefix>
      <suffix>"</suffix>
    </input>
    <input type="dropdown" token="shortVIN" searchWhenChanged="true" id="input_shortVIN">
      <label>FGNR</label>
      <fieldForLabel>shortVIN</fieldForLabel>
      <fieldForValue>shortVIN</fieldForValue>
      <search id="search_input_shortVIN">
        <query>| tstats
    count
    latest(_time) AS _time
  from datamodel=APDM_TestStepResults
  where 
    TestStepResult.testStepResult="NOK"
    TestStepResult.$tok_werk$
  groupby 
    TestStepResult.shortVIN
summariesonly=true
| rename TestStepResult.* as *
| sort limit=1000 - _time</query>
        <earliest>$time.earliest$</earliest>
        <latest>$time.latest$</latest>
      </search>
      <allowCustomValues>true</allowCustomValues>
      <change>
        <set token="tsr_filter"></set>
        <set token="tsr_label" i18ntag="">Alle Prüfschrittergebnisse mit Fehlern</set>
        <unset token="fehlerklasse"></unset>
        <unset token="fehlerbild"></unset>
        <unset token="fehler"></unset>
        <unset token="nacharbeitsfilter"></unset>
        <unset token="clusternum"></unset>
      </change>
    </input>
  </fieldset>
  <row depends="$shortVIN$">
    <panel>
      <title>Fehlerauswahl</title>
      <table id="tablePruefumfangFehler">
        <title>Prüfumfänge, die bei ihrer letzten Ausführung Fehler hatten</title>
        <search>
          <query>| tstats 
    latest(_time) as _time
    latest(source) as source
    latest(TestResult.errorCount) as Fehler
  from datamodel=APDM_TestResults
  where 
    TestResult.shortVIN="$shortVIN$"
    TestResult.$tok_werk$
  groupby 
    TestResult.pruefumfangName

summariesonly=true
| rename TestResult.* as *
| search Fehler&gt;0
| sort - Fehler
| eval lastExec=strftime(_time,"%Y-%m-%d %H:%M:%S")
| eval source=replace(source,"\\\\","\\\\\\\\")
| table pruefumfangName lastExec Fehler source
| rename 
  lastExec as "$i18n_lastExecute$"
  pruefumfangName as "$i18n_testScope$"
  Fehler as "$i18n_error$"</query>
          <earliest>$time.earliest$</earliest>
          <latest>$time.latest$</latest>
        </search>
        <option name="drilldown">row</option>
        <format type="color" field="$i18n_error$">
          <colorPalette type="list">[#65A637,#D93F3C]</colorPalette>
          <scale type="threshold">1</scale>
        </format>
        <drilldown>
          <set token="tsr_filter">source="$row.source$"</set>
          <set token="tsr_label" i18ntag="">Prüfschrittergebnisse mit Fehlern aus dem gewählten Prüfumfang</set>
        </drilldown>
      </table>
      <table id="tablePruefschrittFehler">
        <title>Prüfschritte, die bei ihrer letzten Ausführung Fehler hatten</title>
        <search>
          <query>| tstats
    latest(_time) as _time
  from datamodel=APDM_TestStepResults
  where 
    TestStepResult.shortVIN="$shortVIN$"
    TestStepResult.testStepResult="NOK"
    TestStepResult.$tok_werk$
  groupby 
    TestStepResult.pruefumfangName
    TestStepResult.testStepName
    TestStepResult.description
    TestStepResult.param1
    TestStepResult.param2
    TestStepResult.resultName
    TestStepResult.testStepResult
    TestStepResult.resultValueStr
    TestStepResult.ErrorCodeDec
    TestStepResult.errorText
    TestStepResult.adviseText
    source
summariesonly=true
| rename TestStepResult.* as *

| join type=inner max=1 _time pruefumfangName testStepName description param1 param2
[
| tstats
    latest(_time) as _time
    latest(source) as source
  from datamodel=APDM_TestStepResults
  where 
    TestStepResult.shortVIN="$shortVIN$"
    TestStepResult.$tok_werk$
  groupby 
    TestStepResult.pruefumfangName
    TestStepResult.testStepName
    TestStepResult.description
    TestStepResult.param1
    TestStepResult.param2
summariesonly=true
| rename TestStepResult.* as *
]
| stats count as "NOK Results" by pruefumfangName testStepName description param1 param2 _time source
| sort - "NOK Results"
| eval lastExec=strftime(_time,"%Y-%m-%d %H:%M:%S")
| eval source=replace(source,"\\\\","\\\\\\\\")
| table pruefumfangName testStepName description param1 param2 lastExec "NOK Results" source
| rename 
  lastExec as "$i18n_lastExecute$"
  pruefumfangName AS "$i18n_testScope$" 
  testStepName AS "$i18n_testStepName$" 
  description AS "$i18n_description$" 
  param1 AS "$i18n_sgbd$", 
  param2 AS "$i18n_apiJob$"
  "NOK Results" AS "$i18n_nokResults$"</query>
          <earliest>$time.earliest$</earliest>
          <latest>$time.latest$</latest>
        </search>
        <option name="dataOverlayMode">none</option>
        <option name="drilldown">row</option>
        <format type="color" field="$i18n_lastExecute$">
          <colorPalette type="map">{"*":#D93F3C}</colorPalette>
        </format>
        <format type="color" field="$i18n_nokResults$">
          <colorPalette type="list">[#65A637,#D93F3C]</colorPalette>
          <scale type="threshold">0</scale>
        </format>
        <drilldown>
          <!--set token="tsr_filter">source="$row.source$" TestStepResult.pruefumfangName="$row.Prüfumfang$" TestStepResult.testStepName="$row.Prüfling$" TestStepResult.description="$row.Prüfprozedur$" TestStepResult.param1="$row.SGBD$" TestStepResult.param2="$row.Api-Job$"</set-->
          <set token="tsr_label" i18ntag="">Prüfschrittergebnisse des gewählten Prüfschrittes mit Fehlern</set>
        </drilldown>
      </table>
      <table id="tableEinzelFehler">
        <!-- Prüfschritte -->
        <title>$tsr_label$</title>
        <search>
          <query>| tstats
    latest(_time) as _time
  from datamodel=APDM_TestStepResults
  where 
    TestStepResult.shortVIN="$shortVIN$"
    $tsr_filter$
    TestStepResult.testStepResult="NOK"
    TestStepResult.$tok_werk$
  groupby 
    TestStepResult.pruefumfangName
    TestStepResult.testStepName
    TestStepResult.description
    TestStepResult.param1
    TestStepResult.param2
    TestStepResult.resultName
    TestStepResult.testStepResult
    TestStepResult.resultValueStr
    TestStepResult.ErrorCodeDec
    TestStepResult.errorText
    TestStepResult.adviseText
summariesonly=true
| rename TestStepResult.* as *

| lookup lkup_fehlerklasse pruefumfangName testStepName resultName description param1 param2 resultValueStr ErrorCodeDec errorText adviseText OUTPUT ID as Fehlerklasse
| join Fehlerklasse type=left max=1 overwrite=false
  [ inputlookup lkup_fehlerbilder
  | eval Fehlerbild_Fehlerklassen=replace(replace(Fehlerklassen,"ID_",""),";",",")
  | eval Fehlerbild=coalesce(Fehlerbild_Beschreibung,"n.n.")
  | eval Fehlerklasse=split(Fehlerbild_Fehlerklassen,",") 
  | mvexpand Fehlerklasse
  | fields Fehlerklasse Fehlerbild Fehlerbild_Fehlerklassen  
]
| eval Fehlerbild_Fehlerklassen=replace(replace(Fehlerbild_Fehlerklassen,"ID_",""),";",",")
| eval lastExec=strftime(_time,"%Y-%m-%d %H:%M:%S")
| table lastExec pruefumfangName testStepName description param1 param2 resultName resultValueStr ErrorCodeDec errorText adviseText testStepResult Fehlerklasse Fehlerbild Fehlerbild_Fehlerklassen
| rename 
  lastExec AS "$i18n_lastExecute$"
  pruefumfangName AS "$i18n_testScope$"
  testStepName AS "$i18n_testStepName$"
  description AS "$i18n_description$"
  param1 AS "$i18n_sgbd$"
  param2 AS "$i18n_apiJob$"
  resultName AS "$i18n_resultName$"
  resultValueStr AS "$i18n_resultValue$"
  ErrorCodeDec AS "$i18n_errorCodeDec$"
  errorText AS "$i18n_errorText$"
  adviseText AS "$i18n_adviseText$"
  testStepResult AS "$i18n_testStepResult$"
  Fehlerklasse AS "$i18n_errorClass$"
  Fehlerbild AS "$i18n_errorPattern$"
            </query>
          <earliest>$time.earliest$</earliest>
          <latest>$time.latest$</latest>
        </search>
        
        <option name="drilldown">row</option>
        
        <format type="color" field="$i18n_testStepResult$">
          <colorPalette type="map">{"NOK":#D93F3C,"OK":#65A637}</colorPalette>
        </format>
        <format type="color" field="$i18n_errorClass$">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
        <format type="color" field="$i18n_errorPattern$">
          <colorPalette type="sharedList"></colorPalette>
          <scale type="sharedCategory"></scale>
        </format>
        <!--drilldown>
          <condition field="Fehlerklasse">
            <set token="fehlerklasse">$row.Fehlerklasse$</set>
            <unset token="fehlerbild"></unset>
            <unset token="fehler"></unset>
            <set token="nacharbeitsfilter">fehlerklasse_id="$row.Fehlerklasse$"</set>
            <unset token="clusternum"></unset>
          </condition>
          <condition field="Fehlerbild">
            <unset token="fehlerklasse"></unset>
            <set token="fehlerbild">$row.Fehlerbild$</set>
            <unset token="fehler"></unset>
            <set token="nacharbeitsfilter">fehlerklasse_id IN ($row.Fehlerbild_Fehlerklassen$)</set>
            <unset token="clusternum"></unset>
          </condition>
          <condition field="*">
            <unset token="fehlerklasse"></unset>
            <unset token="fehlerbild"></unset>
            <set token="fehler">true</set>
            <set token="nacharbeitsfilter">pruefumfangName="$row.pruefumfangName$", testStepName="$row.testStepName$", description="$row.description$", param1="$row.param1$", param2="$row.param2$", resultName="$row.resultName$", resultValueStr="$row.resultValueStr$", ErrorCodeDec="$row.ErrorCodeDec$", errorText="$row.errorText$", adviseText="$row.adviseText$"</set>
            <unset token="clusternum"></unset>
          </condition>
        </drilldown-->
      </table>
    </panel>
  </row>
  <row depends="$nacharbeitsfilter$">
    <panel>
      <table depends="$fehler$">
        <title>Ausgewählter Fehler</title>
        <search>
          <query>| makeresults | fields - _time | eval $nacharbeitsfilter$ 
| table pruefumfangName testStepName description param1 param2 resultName resultValueStr ErrorCodeDec errorText adviseText
| rename 
  pruefumfangName AS "$i18n_testScope$"
  testStepName AS "$i18n_testStepName$"
  description AS "$i18n_description$"
  param1 AS "$i18n_sgbd$"
  param2 AS "$i18n_apiJob$"
  resultName AS "$i18n_resultName$"
  resultValueStr AS "$i18n_resultValue$"
  ErrorCodeDec AS "$i18n_errorCodeDec$"
  errorText AS "$i18n_errorText$"
  adviseText AS "$i18n_adviseText$"
          </query>
          <earliest>0</earliest>
          <latest></latest>
        </search>
        <option name="drilldown">none</option>
      </table>
      <table depends="$fehlerklasse$">
        <title>$i18n_selectedErrorClass$ ($fehlerklasse$)</title>
        <search>
          <query>| inputlookup lkup_fehlerklasse | rename  ID as fehlerklasse_id | where $nacharbeitsfilter$ | eval examples=split(examples,"\\x0A")
| table pruefumfangName testStepName description param1 param2 resultName resultValueStr ErrorCodeDec errorText adviseText examples 
| rename 
  pruefumfangName AS "$i18n_testScope$"
  testStepName AS "$i18n_testStepName$"
  description AS "$i18n_description$"
  param1 AS "$i18n_sgbd$"
  param2 AS "$i18n_apiJob$"
  resultName AS "$i18n_resultName$"
  resultValueStr AS "$i18n_resultValue$"
  ErrorCodeDec AS "$i18n_errorCodeDec$"
  errorText AS "$i18n_errorText$"
  adviseText AS "$i18n_adviseText$"
  examples AS "$i18n_examples$"
          </query>
          <earliest>0</earliest>
          <latest></latest>
        </search>
        <option name="drilldown">none</option>
      </table>
      <table depends="$fehlerbild$">
        <title>$i18n_selectedErrorPattern$ $fehlerbild$ $i18n_withFollowingErrorC$</title>
        <search>
          <query>| inputlookup lkup_fehlerklasse | rename  ID as fehlerklasse_id | where $nacharbeitsfilter$ | eval examples=split(examples,"\\x0A") 
| table pruefumfangName testStepName description param1 param2 resultName resultValueStr ErrorCodeDec errorText adviseText examples 
| rename 
  pruefumfangName AS "$i18n_testScope$"
  testStepName AS "$i18n_testStepName$"
  description AS "$i18n_description$"
  param1 AS "$i18n_sgbd$"
  param2 AS "$i18n_apiJob$"
  resultName AS "$i18n_resultName$"
  resultValueStr AS "$i18n_resultValue$"
  ErrorCodeDec AS "$i18n_errorCodeDec$"
  errorText AS "$i18n_errorText$"
  adviseText AS "$i18n_adviseText$"
  examples AS "$i18n_examples$"
</query>
          <earliest>0</earliest>
          <latest></latest>
        </search>
        <option name="drilldown">none</option>
      </table>
    </panel>
  </row>

  <row id="tabs" depends="$nacharbeitsfilter$">
    <panel>
      <title>Zugehörige Nacharbeiten</title>
      <html>
        <ul class="nav nav-tabs" id="tabs">
            <li class="active">
                <a href="#" class="toggle-tab i18n" data-token="tab1_clicked" data-elements="all_reworks" data-toggle="tab" i18ntag="">Alle Nacharbeiten</a>
            </li>
            <li>
                <a href="#" class="toggle-tab i18n" data-token="tab2_clicked" data-elements="rework_categories,selected_rework_categories" data-toggle="tab" i18ntag="">Nacharbeitskategorien</a>
            </li>
            <li>
                <a href="#" class="toggle-tab i18n" data-token="tab3_clicked" data-elements="rework_statistics" data-toggle="tab" i18ntag="">Statistiken</a>
            </li>
        </ul>
      </html>
    </panel>
  </row>
  
  <row id="all_reworks" depends="$nacharbeitsfilter$">
    <panel>
      <table id="table_all_reworks" depends="$nacharbeitsfilter$">
        <title>Alle Nacharbeiten (neueste zuerst)</title>
        <search base="search_text_mining_part1">
          <query>eval execTime=strftime(_time,"%Y-%m-%d %H:%M:%S") | sort - execTime 
| table execTime station shortVIN fehlerart fehlerlage fehlerort taetigkeit pr_bemerkung na_bemerkung werk integrationLevel series merkmal bel_kostenstelle bel_meisterbereich nacharbeitsdauer
| rename 
  execTime AS "$i18n_execTime$"
  station AS "$i18n_station$"
  shortVIN AS "$i18n_shortVIN$"
  fehlerart AS "$i18n_fehlerart$"
  fehlerlage AS "$i18n_fehlerlage$"
  fehlerort AS "$i18n_fehlerort$"
  taetigkeit AS "$i18n_taetigkeit$"
  pr_bemerkung AS "$i18n_pr_bemerkung$"
  na_bemerkung AS "$i18n_na_bemerkung$"
  werk AS "$i18n_werk$"
  integrationLevel AS "$i18n_integrationLevel$"
  series AS "$i18n_series$"
  merkmal AS "$i18n_merkmal$"
  bel_kostenstelle AS "$i18n_bel_kostenstelle$"
  bel_meisterbereich AS "$i18n_bel_meisterbereich$"
  nacharbeitsdauer AS "$i18n_nacharbeitsdauer$"
          </query>
        </search>
        <option name="drilldown">none</option>
      </table>
    </panel>
  </row>
  
  <row id="rework_categories" depends="$nacharbeitsfilter$">
    <panel>
      <table id="tableReworkCat">
        <search base="search_text_mining_part3">
          <query>
  stats values(*) as * count by cluster_label
| mvmatcher
| table count fehlerart fehlerlage fehlerort taetigkeit pr_bemerkung na_bemerkung cluster_label 
| rename 
  count AS "$i18n_count$"
  fehlerart AS "$i18n_fehlerart$"
  fehlerlage AS "$i18n_fehlerlage$"
  fehlerort AS "$i18n_fehlerort$"
  taetigkeit AS "$i18n_taetigkeit$"
  pr_bemerkung AS "$i18n_pr_bemerkung$"
  na_bemerkung AS "$i18n_na_bemerkung$"
| sort - count
          </query>
        </search>
        <drilldown>
          <eval token="clusternum">$row.cluster_label$</eval>
        </drilldown>
      </table>
    </panel>
    <panel>
      <viz type="viz_jstree_app.jstree">
        <title>Nacharbeitskategorien</title>
        <search id="search_text_mining_part4" base="search_text_mining_part3">
          <query>
`comment("Bilde eine Hierarchie aus den Clustern")`
| stats values(*) as * count by cluster_label
| mvmatcher
| fit QLearningTextClustering *

`comment("Bereite Visualisierung vor")`
| sort - count cluster_label
| eval tokens=split(Token," ")
| eval id=round(cluster_label), parent=coalesce(round(ParentID),""), count=round(count)
| table id parent count tokens drilldown_id
          </query>
        </search>
        <option name="drilldown">row</option>
        <option name="height">414</option>
        <drilldown>
          <eval token="clusternum">$row.drilldown_id$</eval>
        </drilldown>
      </viz>
    </panel>
  </row>
  <row id="selected_rework_categories" depends="$nacharbeitsfilter$">
    <panel>
      <table id="table_selected_rework_categories" depends="$clusternum$">
        <title>Nacharbeiten der ausgewählten Kategorie</title>
        <search base="search_text_mining_part3">
          <query>search cluster_label IN ($clusternum$) 
| eval execTime=strftime(_time,"%Y-%m-%d %H:%M:%S") 
| table execTime shortVIN fehlerart fehlerlage fehlerort taetigkeit pr_bemerkung na_bemerkung
| rename 
  execTime AS "$i18n_execTime$"
  shortVIN AS "$i18n_shortVIN$"
  fehlerart AS "$i18n_fehlerart$"
  fehlerlage AS "$i18n_fehlerlage$"
  fehlerort AS "$i18n_fehlerort$"
  taetigkeit AS "$i18n_taetigkeit$"
  pr_bemerkung AS "$i18n_pr_bemerkung$"
  na_bemerkung AS "$i18n_na_bemerkung$"
          </query>
        </search>
      </table>
    </panel>
  </row>
  <row id="rework_statistics" depends="$nacharbeitsfilter$">
    <panel>
      <viz type="viz_wordcloud_app.wordcloud">
        <title>Wichtige Wörter</title>
        <search base="search_text_mining_part2">
          <query>stats count by token</query>
        </search>
        <option name="drilldown">none</option>
        <option name="viz_wordcloud_app.wordcloud.alignmentMode">horizontal</option>
        <option name="viz_wordcloud_app.wordcloud.backgroundColor">#fff</option>
        <option name="viz_wordcloud_app.wordcloud.colorBy">colorMode</option>
        <option name="viz_wordcloud_app.wordcloud.colorMode">categorical</option>
        <option name="viz_wordcloud_app.wordcloud.maxColor">#3fc77a</option>
        <option name="viz_wordcloud_app.wordcloud.minColor">#d93f3c</option>
        <option name="viz_wordcloud_app.wordcloud.numOfBins">-1</option>
        <option name="viz_wordcloud_app.wordcloud.splunkTastic">false</option>
        <option name="viz_wordcloud_app.wordcloud.useColors">false</option>
      </viz>
      <chart>
        <title>Häufigste Nacharbeitsstation</title>
        <search base="search_text_mining_part1">
          <query>| top station</query>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">collapsed</option>
        <option name="charting.axisTitleY.text">$i18n_count$</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">bar</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">none</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">none</option>
        <option name="trellis.enabled">0</option>
        <option name="trellis.scales.shared">1</option>
        <option name="trellis.size">medium</option>
        <option name="drilldown">none</option>
      </chart>
      <chart>
        <title>Häufigste Fehlerart</title>
        <search base="search_text_mining_part1">
          <query>| top fehlerart</query>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">collapsed</option>
        <option name="charting.axisTitleY.text">$i18n_count$</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">bar</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">none</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">none</option>
        <option name="trellis.enabled">0</option>
        <option name="trellis.scales.shared">1</option>
        <option name="trellis.size">medium</option>
        <option name="drilldown">none</option>
      </chart>
      <chart>
        <title>Häufigste Fehlerlage</title>
        <search base="search_text_mining_part1">
          <query>| top fehlerlage</query>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">collapsed</option>
        <option name="charting.axisTitleY.text">$i18n_count$</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">bar</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">none</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">none</option>
        <option name="trellis.enabled">0</option>
        <option name="trellis.scales.shared">1</option>
        <option name="trellis.size">medium</option>
        <option name="drilldown">none</option>
      </chart>
      <chart>
        <title>Häufigster Fehlerort</title>
        <search base="search_text_mining_part1">
          <query>| top fehlerort</query>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">collapsed</option>
        <option name="charting.axisTitleY.text">$i18n_count$</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">bar</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">none</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">none</option>
        <option name="trellis.enabled">0</option>
        <option name="trellis.scales.shared">1</option>
        <option name="trellis.size">medium</option>
        <option name="drilldown">none</option>
      </chart>
      <chart>
        <title>Häufigste NA Tätigkeit</title>
        <search base="search_text_mining_part1">
          <query>| top taetigkeit</query>
        </search>
        <option name="charting.axisLabelsX.majorLabelStyle.overflowMode">ellipsisNone</option>
        <option name="charting.axisLabelsX.majorLabelStyle.rotation">0</option>
        <option name="charting.axisTitleX.visibility">collapsed</option>
        <option name="charting.axisTitleY.text">$i18n_count$</option>
        <option name="charting.axisTitleY.visibility">visible</option>
        <option name="charting.axisTitleY2.visibility">visible</option>
        <option name="charting.axisX.scale">linear</option>
        <option name="charting.axisY.scale">linear</option>
        <option name="charting.axisY2.enabled">0</option>
        <option name="charting.axisY2.scale">inherit</option>
        <option name="charting.chart">bar</option>
        <option name="charting.chart.nullValueMode">gaps</option>
        <option name="charting.chart.showDataLabels">none</option>
        <option name="charting.chart.sliceCollapsingThreshold">0.01</option>
        <option name="charting.chart.stackMode">default</option>
        <option name="charting.chart.style">shiny</option>
        <option name="charting.drilldown">none</option>
        <option name="charting.layout.splitSeries">0</option>
        <option name="charting.layout.splitSeries.allowIndependentYRanges">0</option>
        <option name="charting.legend.labelStyle.overflowMode">ellipsisMiddle</option>
        <option name="charting.legend.placement">none</option>
        <option name="trellis.enabled">0</option>
        <option name="trellis.scales.shared">1</option>
        <option name="trellis.size">medium</option>
        <option name="drilldown">none</option>
      </chart>
    </panel>
  </row>
</form>